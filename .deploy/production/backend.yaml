sipher-chart:
  ingress:
    enabled: true
    annotations:
      alb.ingress.kubernetes.io/scheme: internet-facing
      alb.ingress.kubernetes.io/target-type: ip
      kubernetes.io/ingress.class: alb
      service.beta.kubernetes.io/aws-load-balancer-internal: "true"
    rules:
      - host: api-dashboard.atherlabs.xyz
        paths:
          - path: /
            serviceName: loyalty-backend-api
            servicePort: 5500
            pathType: ImplementationSpecific
  deploys:
    - name: backend
      replicasCount: 2
      autoScale:
        min: 2
        max: 5
      resources:
        requests:
          memory: 256Mi
          cpu: 128m
        limits:
          memory: 512Mi
          cpu: 512m
      command: ["/bin/sh"]
      args:
        - "-c"
        - "node ./dist/main.js"
      services:
        - name: api
          containerPort:
            api: 5500
    - name: lootbox-tracker
      replicasCount: 1
      resources: {}
      command: ["/bin/sh"]
      args:
        - "-c"
        - "node ./dist/scripts/lootbox-tracker.js"
    - name: sculpture-tracker
      replicasCount: 1
      resources: {}
      command: ["/bin/sh"]
      args:
        - "-c"
        - "node ./dist/scripts/sculpture-tracker.js"
  env:
    PORT: 5500
    NODE_ENV: production
    POSTGRES_URL: ssm:/atherlabs/dashboard/prod/POSTGRES_URL
    POSTGRES_SYNCHRONIZE: false
    SESSION_URL: ssm:/atherlabs/dashboard/prod/SESSION_URL
    KEY_INFURA: ssm:/atherlabs/dashboard/prod/KEY_INFURA
    ELASTICSEARCH_ENDPOINT: https://search-dev-marketplace-j3etkzos2pedv2c2q6jl2wy5d4.us-west-2.es.amazonaws.com
    ELASTICSEARCH_INDEX: dev-marketplace
    PRIVATE_KEY_LOYALTY: ssm:/atherlabs/dashboard/prod/PRIVATE_KEY_LOYALTY
    ATHER_ID_URL: https://api-atherid.sipher.gg/api
    ATHER_SOCIAL_URL: https://api-ather-social.sipher.gg/api
